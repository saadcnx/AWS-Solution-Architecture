AWS VPC CIDR Configuration Rules & Guidelines

CIDR Block Size Limitations

Allowable CIDR Ranges:
Minimum: /28 = 16 IP addresses
Maximum: /16 = 65,536 IP addresses
Practical Working Range: /16 to /28
Usable IP Address Calculation:

For a /24 subnet:

Total IPs: 256 addresses
Reserved IPs: 5 addresses
Usable IPs: 256 - 5 = 251 addresses
CIDR Modification Restrictions

Critical Limitation:
❌ Existing VPC CIDR cannot be modified after creation

Workaround Strategy:
✅ Solution: Create new VPC with desired CIDR and migrate resources

Implementation Steps:
Create new VPC with corrected CIDR range
Set up equivalent networking components
Migrate resources using AWS migration tools
Update DNS records and application configurations
Decommission old VPC
CIDR Overlap Prevention

Fundamental Rule:
No overlapping CIDR blocks within the same VPC

Valid Examples (No Overlap):
10.0.0.0/16 + 172.31.0.0/16
192.168.1.0/24 + 10.10.0.0/16
172.16.0.0/12 + 192.168.0.0/16

Invalid Examples (Overlap):
10.0.0.0/16 + 10.0.1.0/24
(Second CIDR is subset of first)

172.31.0.0/16 + 172.31.128.0/17
(Second CIDR overlaps with first)

192.168.0.0/23 + 192.168.1.0/24
(Partial overlap)

Secondary CIDR Block Management
Expansion Capability:
✅ Add secondary CIDR blocks to expand VPC address space

Deletion Rules:
✅ Secondary CIDR blocks can be deleted
❌ Primary CIDR block cannot be deleted

Practical Example:
Initial Configuration:
Primary CIDR: 172.31.0.0/16 (65,536 IPs)
Available: 65,536 IP addresses
Expansion Scenario:
Add Secondary CIDR: 172.29.0.0/16
Total Capacity: 131,072 IP addresses
Growth: 100% increase in address space

Real-World Business Scenario
Company Expansion Requirement:

Initial State:
Original VPC: 10.0.0.0/16
IP Capacity: 65,536 addresses
Utilization: 95% (IP exhaustion imminent)

Expansion Solution:
Add Secondary CIDR: 10.1.0.0/16
New Total Capacity: 131,072 addresses

Allocate New Subnets:

10.1.0.0/24 for new development environment
10.1.1.0/24 for QA/testing
10.1.2.0/24 for staging

Strategic Planning Example:
Enterprise VPC Design:

text
Primary CIDR:   10.0.0.0/16  (Production workloads)
Secondary CIDR: 10.1.0.0/16  (Development/Testing)
Secondary CIDR: 10.2.0.0/16  (Future expansion)
Subnet Allocation Strategy:

Production: 10.0.x.x/24 subnets
Development: 10.1.x.x/24 subnets
Testing: 10.2.x.x/24 subnets
Shared Services: 10.3.x.x/24 subnets
Professional Recommendations

1. Initial CIDR Planning:
Always allocate larger CIDR than current requirements
Consider 5-year growth projection in initial design
Reserve contiguous blocks for organizational units

2. Multi-VPC Strategy:
text
Region: us-east-1
├── VPC-1: 10.0.0.0/16 (Production)
├── VPC-2: 10.1.0.0/16 (Development)
├── VPC-3: 10.2.0.0/16 (Staging)
└── VPC-4: 10.3.0.0/16 (DR/Backup)
3. Documentation Standards:
Maintain CIDR allocation register
Document subnet purposes and ownership
Track IP utilization metrics
Review capacity quarterly

4. Routing Considerations:
Secondary CIDRs require route table updates
VPC Peering must accommodate all CIDR blocks
Transit Gateway routing needs CIDR awareness
On-premise connectivity must support all ranges

Compliance & Security Implications

Important Considerations:
Audit Requirements: Secondary CIDRs appear in compliance reports
Security Groups: Rules must consider all CIDR ranges
Network ACLs: Must be updated for new CIDR blocks
Monitoring: CloudWatch metrics should track all IP spaces

Strategic Insight: VPC CIDR planning is foundational to AWS network architecture. Initial conservative planning leads to complex workarounds later. Allocate generous CIDR ranges from the start, implement clear naming conventions, and maintain comprehensive documentation. This proactive approach prevents operational complexity and supports scalable growth.
