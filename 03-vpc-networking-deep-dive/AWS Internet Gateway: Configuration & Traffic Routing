Route Tables: Network Traffic Direction Rules

Example Route Table Configuration:

Destination	Target	Purpose
172.31.0.0/16	local	Internal VPC communication (between subnets)
0.0.0.0/0	igw-xxxxxx	External internet traffic

Traffic Routing Logic:

Subnet A → Subnet B: ✅ Uses local route (internal VPC routing)
Server → Google.com: ✅ Uses igw route (external internet routing)
Database → Application Server: ✅ Uses local route
Web Server → External API: ✅ Uses igw route

Internet Traffic Flow Patterns

Incoming Traffic Flow (Internet → Server):
Internet → Internet Gateway (IGW) → Route Table → Target Server
Example: User accessing your website from browser

Outgoing Traffic Flow (Server → Internet):
Server → Route Table → Internet Gateway (IGW) → Internet
Example: Server downloading updates from external repository

Complete Traffic Pattern:
As correctly described:
"Download process: Server → Router → IGW → Internet"

Internet Gateway (IGW) Configuration Rules
1. IGW-VPC Association Rule:
✅ One IGW can be attached to one VPC only
❌ One IGW cannot be shared across multiple VPCs
✅ One VPC can have multiple IGWs (though uncommon)

2. IGW Attachment Process:
Create IGW - Initially in detached state
Manual Attachment - Explicitly attach to target VPC
Verification - Confirm successful attachment

Common Error Scenario:
Error Message: "You don't have VPC"
Root Cause: IGW is already attached to another VPC

3. Real-World Deployment Example:
Environment Setup:

VPC-1: 10.0.0.0/16 → IGW-1 (Attached)
VPC-2: 172.31.0.0/16 → IGW-2 (Attached)
VPC-3: 192.168.0.0/16 → IGW-3 (Attached)

Key Principle: Each VPC requires its own dedicated IGW

Complete Production Architecture
Network Design:
VPC CIDR: 172.31.0.0/16
Availability Zones: 2 (Multi-AZ deployment)
Subnets: 2 (One per AZ for high availability)

Route Table Configuration:
text
Destination      Target      Description
---------------  ----------  -----------------------------------
172.31.0.0/16    local       Internal VPC communication
0.0.0.0/0        igw-xxxxxx  Internet egress route
Traffic Flow Patterns:
Internal Communication:
text
Subnet-1 (172.31.1.0/24) ↔ Subnet-2 (172.31.2.0/24)
Routing: Direct via local route (implied router)

External Internet Access:
text
Subnet-1 (172.31.1.10) → Internet (Google.com)
Routing: Via igw route (Internet Gateway)

External to Internal:
text
Internet User → IGW → Route Table → Subnet-1 Web Server
Routing: Ingress through IGW with proper route table mapping

Practical Implementation Steps

Step 1: Create Internet Gateway
Navigate to VPC Console
Select "Internet Gateways"
Click "Create internet gateway"
Provide descriptive name tag

Step 2: Attach to VPC
Select created IGW
Choose "Attach to VPC"
Select target VPC from dropdown
Confirm attachment

Step 3: Configure Route Table
Navigate to "Route Tables"
Select main or custom route table
Edit routes
Add: 0.0.0.0/0 → igw-xxxxxx

Step 4: Associate Subnets
Select route table
Choose "Subnet associations"
Associate public subnets requiring internet access

Security Considerations
Public vs. Private Subnets:
Public Subnets: Associated with route table containing IGW route
Private Subnets: Associated with route table containing NAT Gateway route
Isolated Subnets: No internet route (only local VPC communication)

Best Practices:
Minimize public subnets - Only front-facing resources need IGW access
Use NAT Gateways for private subnet internet egress
Implement Security Groups and Network ACLs for layered security
Monitor IGW traffic with VPC Flow Logs


Troubleshooting Common Issues

Issue 1: No Internet Connectivity

Checklist:

IGW attached to correct VPC
Route table contains 0.0.0.0/0 → igw-xxxxxx
Public subnet associated with correct route table
Security groups allow outbound traffic
Network ACLs permit outbound traffic

Issue 2: IGW Attachment Failed

Solutions:
Verify IGW not already attached to another VPC
Check IGW state (should be "available")
Confirm VPC exists and is in same region

Architectural Analogy: The Internet Gateway serves as your VPC's primary entrance/exit point to the public internet. Much like a building's main security gate, it controls all external traffic flow while relying on route tables (security protocols) to determine which traffic is permitted and where it should be directed within your private network infrastructure.
